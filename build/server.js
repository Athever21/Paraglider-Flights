/*! For license information please see server.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./server/devBundle.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var webpack__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webpack */ "webpack");\n/* harmony import */ var webpack__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(webpack__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var webpack_dev_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! webpack-dev-middleware */ "webpack-dev-middleware");\n/* harmony import */ var webpack_dev_middleware__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(webpack_dev_middleware__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var webpack_hot_middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! webpack-hot-middleware */ "webpack-hot-middleware");\n/* harmony import */ var webpack_hot_middleware__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(webpack_hot_middleware__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _webpack_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../webpack.client */ "./webpack.client.js");\n/* harmony import */ var _webpack_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_webpack_client__WEBPACK_IMPORTED_MODULE_3__);\n\r\n\r\n\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (function (app) {\r\n    var compiler = webpack__WEBPACK_IMPORTED_MODULE_0___default()((_webpack_client__WEBPACK_IMPORTED_MODULE_3___default()));\r\n    var middleware = webpack_dev_middleware__WEBPACK_IMPORTED_MODULE_1___default()(compiler, {\r\n        publicPath: (_webpack_client__WEBPACK_IMPORTED_MODULE_3___default().output.publicPath),\r\n    });\r\n    app.use(middleware);\r\n    app.use(webpack_hot_middleware__WEBPACK_IMPORTED_MODULE_2___default()(compiler));\r\n});\r\n\n\n//# sourceURL=webpack://zadanie-loty/./server/devBundle.ts?')},"./server/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ "express");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ "fs");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ "path");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _template__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./template */ "./server/template.ts");\n/* harmony import */ var _routes_files__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./routes/files */ "./server/routes/files.ts");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError("Generator is already executing.");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\nvar cwd = process.cwd();\r\nvar app = express__WEBPACK_IMPORTED_MODULE_0___default()();\r\nvar src = \'<script src="/build/bundle.js"><\/script>\';\r\nif (process.env.NODE_ENB === "production") {\r\n    src = "";\r\n    (function () { return __awaiter(void 0, void 0, void 0, function () {\r\n        var dir;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, fs__WEBPACK_IMPORTED_MODULE_1__.promises.readdir(path__WEBPACK_IMPORTED_MODULE_2___default().join(cwd, "build"))];\r\n                case 1:\r\n                    dir = _a.sent();\r\n                    dir.forEach(function (filename) {\r\n                        if (filename.includes("bundle")) {\r\n                            src += "\\n\\t<script src=\\"/build/" + filename + "\\"><\/script>";\r\n                        }\r\n                    });\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); })();\r\n}\r\nelse {\r\n    __webpack_require__(/*! ./devBundle */ "./server/devBundle.ts").default(app);\r\n}\r\napp.use(express__WEBPACK_IMPORTED_MODULE_0___default().json());\r\napp.use("/build/", express__WEBPACK_IMPORTED_MODULE_0___default().static(path__WEBPACK_IMPORTED_MODULE_2___default().join(cwd, "build")));\r\napp.use("/file", _routes_files__WEBPACK_IMPORTED_MODULE_4__.default);\r\napp.get("*", function (_, res) {\r\n    return res.send((0,_template__WEBPACK_IMPORTED_MODULE_3__.default)(src));\r\n});\r\nvar PORT = process.env.PORT || 3000;\r\napp.listen(PORT, function () { return console.log("Server listening at PORT " + PORT); });\r\n\n\n//# sourceURL=webpack://zadanie-loty/./server/index.ts?')},"./server/routes/files.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ "express");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services_files__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/files */ "./server/services/files.ts");\n\r\n\r\nvar router = (0,express__WEBPACK_IMPORTED_MODULE_0__.Router)();\r\nrouter.post("/from-link", _services_files__WEBPACK_IMPORTED_MODULE_1__.fromLink);\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\r\n\n\n//# sourceURL=webpack://zadanie-loty/./server/routes/files.ts?')},"./server/services/FlightData.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! https */ "https");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(https__WEBPACK_IMPORTED_MODULE_0__);\n\r\nvar FlightData = /** @class */ (function () {\r\n    function FlightData() {\r\n        this.pilot = "";\r\n        this.glider = "";\r\n        this.prev = "";\r\n    }\r\n    FlightData.prototype.processUrl = function (url) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            https__WEBPACK_IMPORTED_MODULE_0___default().get(url, function (stream) { return _this.processData(stream, resolve); });\r\n        });\r\n    };\r\n    FlightData.prototype.processLine = function (line) {\r\n        var _a, _b;\r\n        if (line.includes("PILOT")) {\r\n            this.pilot = (_a = line.split(":").pop()) === null || _a === void 0 ? void 0 : _a.trim();\r\n        }\r\n        if (line.includes("GLIDERTYPE")) {\r\n            this.glider = (_b = line.split(":").pop()) === null || _b === void 0 ? void 0 : _b.trim();\r\n        }\r\n    };\r\n    FlightData.prototype.processChunk = function (d) {\r\n        var _this = this;\r\n        var arr = d.toString().split("\\r");\r\n        arr.forEach(function (x, i) {\r\n            if (i === arr.length - 1) {\r\n                _this.prev = x;\r\n            }\r\n            else {\r\n                var line = i === 0 ? _this.prev + x : x;\r\n                // process.stdout.write(line);\r\n                _this.processLine(line);\r\n            }\r\n        });\r\n    };\r\n    FlightData.prototype.processData = function (data, resolve) {\r\n        var _this = this;\r\n        data.on("data", function (d) { return _this.processChunk(d); });\r\n        data.on("end", function () { return resolve(); });\r\n    };\r\n    return FlightData;\r\n}());\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FlightData);\r\n\n\n//# sourceURL=webpack://zadanie-loty/./server/services/FlightData.ts?')},"./server/services/files.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "fromLink": () => (/* binding */ fromLink)\n/* harmony export */ });\n/* harmony import */ var _FlightData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FlightData */ "./server/services/FlightData.ts");\n\r\nvar fromLink = function (req, res) {\r\n    var url = req.body.url;\r\n    var filght = new _FlightData__WEBPACK_IMPORTED_MODULE_0__.default();\r\n    filght.processUrl(url).then(function () { return console.log(filght); });\r\n    return res.end();\r\n};\r\n\n\n//# sourceURL=webpack://zadanie-loty/./server/services/files.ts?')},"./server/template.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (function (src) { return ("\\n  <!DOCTYPE HTML>\\n  <html lang=\\"eng\\">\\n    <head>\\n      <meta charset=\\"utf-8\\">\\n      <title>Paraglider Flights</title>\\n    </head>\\n    <style>\\n      html {\\n        background: #101010;\\n      }\\n    </style>\\n    <body>\\n      <div id=\\"root\\"></div>\\n      " + src + "\\n    </body>\\n  </html>\\n"); });\r\n\n\n//# sourceURL=webpack://zadanie-loty/./server/template.ts?')},"./webpack.client.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('const path = __webpack_require__(/*! path */ "path");\r\nconst webpack = __webpack_require__(/*! webpack */ "webpack");\r\nconst cwd = process.cwd();\r\nconst TerserPlugin = __webpack_require__(/*! terser-webpack-plugin */ "terser-webpack-plugin");\r\n\r\nmodule.exports = {\r\n  name: "browser",\r\n  devtool: "eval-source-map",\r\n  mode: "development",\r\n  entry: [\r\n    "webpack-hot-middleware/client?reload=true",\r\n    path.join(cwd, "client", "index.tsx"),\r\n  ],\r\n  output: {\r\n    path: path.join(cwd, "build"),\r\n    filename: "bundle.js",\r\n    publicPath: "/build/",\r\n  },\r\n  module: {\r\n    rules: [\r\n      {\r\n        test: /\\.tsx?$/,\r\n        use: "ts-loader",\r\n        include: path.join(cwd, "client"),\r\n      },\r\n      {\r\n        test: /\\.css$/,\r\n        use: ["style-loader", "css-loader"],\r\n        include: path.join(cwd, "client"),\r\n      },\r\n    ],\r\n  },\r\n  optimization: {\r\n    emitOnErrors: false,\r\n    minimize: true,\r\n    minimizer: [new TerserPlugin()],\r\n  },\r\n  plugins: [new webpack.HotModuleReplacementPlugin()],\r\n  resolve: {\r\n    extensions: [".ts", ".tsx",".js"],\r\n    alias: {\r\n      "react-dom": "@hot-loader/react-dom",\r\n    },\r\n  },\r\n};\r\n\n\n//# sourceURL=webpack://zadanie-loty/./webpack.client.js?')},express:_=>{"use strict";_.exports=require("express")},fs:_=>{"use strict";_.exports=require("fs")},https:_=>{"use strict";_.exports=require("https")},path:_=>{"use strict";_.exports=require("path")},"terser-webpack-plugin":_=>{"use strict";_.exports=require("terser-webpack-plugin")},webpack:_=>{"use strict";_.exports=require("webpack")},"webpack-dev-middleware":_=>{"use strict";_.exports=require("webpack-dev-middleware")},"webpack-hot-middleware":_=>{"use strict";_.exports=require("webpack-hot-middleware")}},__webpack_module_cache__={};function __webpack_require__(_){var e=__webpack_module_cache__[_];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[_]={exports:{}};return __webpack_modules__[_](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=_=>{var e=_&&_.__esModule?()=>_.default:()=>_;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(_,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(_,r)&&Object.defineProperty(_,r,{enumerable:!0,get:e[r]})},__webpack_require__.o=(_,e)=>Object.prototype.hasOwnProperty.call(_,e),__webpack_require__.r=_=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./server/index.ts")})();